<html>
  <head>
   
    <script type="text/javascript" src="js/jquery-1.6.2.min.js"></script>

    <script>
      $(document).ready(function(){
	 //subscribe the hello application to the hello topic
   	 $.ajax({ type: "GET", url: "subscribe.php", dataType: "xml", success: messageParser });
	 
         //retreive events and parse them.
         setInterval(function () {
	   $.ajax({ type: "GET", url: "event.php", dataType: "xml", success: messageParser });		
         }, 2000);
      });

    //using this parser we will get the events and add them to the DOM
    function messageParser(xml) {
	$(xml).find("event").each(function () {
	  //$(".messages").append('<div class="message">' + $(this).find("eventName").text() + '</div>');
		//handle different events		
		switch($(this).find("eventName").text())
		{
		case "happy":
		  $("#messageboard").html("Happy: 5");
		  break;
		case "sad":
		  $("#messageboard").html("Sad: 3");
		  break;
		case "comparison":
		  $("#messageboard").html("Happy: 5 || Sad: 3");
		  break;
		default:
		  $("#messageboard").html("Please select Sad, Happy or Comparison");
		}
    	});

        //if ($(".messages").find('div').length > 4 ){
	//  $(".messages").find('div').slice(0,1).remove();
	//}
    }
  </script>

  </head>
  <body>
Smile Statistics Analysis 
  
<div id="messageboard"><div class="messages"><div class="message">...</div></div> </div>	
  </body>
</html>
